MODULES = nominatim
PGXS := @POSTGRESQL_PGXS@
PG_CONFIG := @PG_CONFIG@
include $(PGXS)

SITE_INSTALL := tables.sql functions.sql indices.sql compute_words.sql tokenizer.php

all:
	chmod 755 nominatim.so

install:
	@echo Use site-install to install this module.

site-install: SITE_MODDIR = $(SITE)/modules/transliterate

site-install:
	$(if $(SITE),,$(error No Nominatim site directory given (with option SITE=...)))
	@echo Installing to '$(SITE_MODDIR)'.
	@install -d '$(SITE_MODDIR)'
	@rm -f "$(SITE_MODDIR)/*"
	install -t $(SITE_MODDIR) nominatim.so
	install -t $(SITE_MODDIR) -m 644 $(SITE_INSTALL)

